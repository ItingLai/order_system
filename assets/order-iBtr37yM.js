import{s as oe,q as ae,t as ne,d as B,u as F,v as re,o as c,a as f,x as l,f as e,_ as q,b as H,y as ie,c as $,h as O,n as m,z as W,A as V,g as b,B as ce,m as a,j as Q,C as Z,D as A,F as pe,G as X,i as ue,H as N,I as de,J as me,K as fe,L as Y,e as j,w as d,r as ve,E as L,M as _e,N as ye,p as R,O as he,P as ge,Q as ke,R as $e,S as Ce,T as K}from"./index-z1hJ5Cph.js";import{E as Se}from"./el-result-RAkQe3o2.js";/* empty css                */import{E as be,a as we}from"./el-form-item-hkvdCSl9.js";import{C as ee,E as Ee}from"./el-input-d0ib9Cgp.js";import{E as Ne,a as Ve}from"./el-table-column-1bJrMaUz.js";import"./el-scrollbar-T1eaASHH.js";import{E as Be}from"./el-button-O8kHkmLi.js";import"./el-tag-y0BCCjTp.js";import"./castArray-03vanRhI.js";import"./use-form-item-vmAXCTid.js";import"./_Uint8Array-bsnH_Esz.js";import"./_initCloneObject-ykFolvl_.js";import"./debounce-yb6mxPpC.js";const xe=(y,n,t)=>ae(y.subTree).filter(i=>{var s;return ne(i)&&((s=i.type)==null?void 0:s.name)===n&&!!i.component}).map(i=>i.component.uid).map(i=>t[i]).filter(i=>!!i),Ie=(y,n)=>{const t={},r=oe([]);return{children:r,addChild:s=>{t[s.uid]=s,r.value=xe(y,n,t)},removeChild:s=>{delete t[s],r.value=r.value.filter(p=>p.uid!==s)}}},Re={viewBox:"0 0 79 86",version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},Te=["id"],Pe=["stop-color"],Ge=["stop-color"],Oe=["id"],ze=["stop-color"],De=["stop-color"],Ue=["id"],je={id:"Illustrations",stroke:"none","stroke-width":"1",fill:"none","fill-rule":"evenodd"},Fe={id:"B-type",transform:"translate(-1268.000000, -535.000000)"},qe={id:"Group-2",transform:"translate(1268.000000, 535.000000)"},Me=["fill"],Le=["fill"],We={id:"Group-Copy",transform:"translate(34.500000, 31.500000) scale(-1, 1) rotate(-25.000000) translate(-34.500000, -31.500000) translate(7.000000, 10.000000)"},Ae=["fill"],He=["fill"],Je=["fill"],Ke=["fill"],Qe=["fill"],Ze={id:"Rectangle-Copy-17",transform:"translate(53.000000, 45.000000)"},Xe=["fill","xlink:href"],Ye=["fill","mask"],et=["fill"],tt=B({name:"ImgEmpty"}),st=B({...tt,setup(y){const n=F("empty"),t=re();return(r,h)=>(c(),f("svg",Re,[l("defs",null,[l("linearGradient",{id:`linearGradient-1-${e(t)}`,x1:"38.8503086%",y1:"0%",x2:"61.1496914%",y2:"100%"},[l("stop",{"stop-color":`var(${e(n).cssVarBlockName("fill-color-1")})`,offset:"0%"},null,8,Pe),l("stop",{"stop-color":`var(${e(n).cssVarBlockName("fill-color-4")})`,offset:"100%"},null,8,Ge)],8,Te),l("linearGradient",{id:`linearGradient-2-${e(t)}`,x1:"0%",y1:"9.5%",x2:"100%",y2:"90.5%"},[l("stop",{"stop-color":`var(${e(n).cssVarBlockName("fill-color-1")})`,offset:"0%"},null,8,ze),l("stop",{"stop-color":`var(${e(n).cssVarBlockName("fill-color-6")})`,offset:"100%"},null,8,De)],8,Oe),l("rect",{id:`path-3-${e(t)}`,x:"0",y:"0",width:"17",height:"36"},null,8,Ue)]),l("g",je,[l("g",Fe,[l("g",qe,[l("path",{id:"Oval-Copy-2",d:"M39.5,86 C61.3152476,86 79,83.9106622 79,81.3333333 C79,78.7560045 57.3152476,78 35.5,78 C13.6847524,78 0,78.7560045 0,81.3333333 C0,83.9106622 17.6847524,86 39.5,86 Z",fill:`var(${e(n).cssVarBlockName("fill-color-3")})`},null,8,Me),l("polygon",{id:"Rectangle-Copy-14",fill:`var(${e(n).cssVarBlockName("fill-color-7")})`,transform:"translate(27.500000, 51.500000) scale(1, -1) translate(-27.500000, -51.500000) ",points:"13 58 53 58 42 45 2 45"},null,8,Le),l("g",We,[l("polygon",{id:"Rectangle-Copy-10",fill:`var(${e(n).cssVarBlockName("fill-color-7")})`,transform:"translate(11.500000, 5.000000) scale(1, -1) translate(-11.500000, -5.000000) ",points:"2.84078316e-14 3 18 3 23 7 5 7"},null,8,Ae),l("polygon",{id:"Rectangle-Copy-11",fill:`var(${e(n).cssVarBlockName("fill-color-5")})`,points:"-3.69149156e-15 7 38 7 38 43 -3.69149156e-15 43"},null,8,He),l("rect",{id:"Rectangle-Copy-12",fill:`url(#linearGradient-1-${e(t)})`,transform:"translate(46.500000, 25.000000) scale(-1, 1) translate(-46.500000, -25.000000) ",x:"38",y:"7",width:"17",height:"36"},null,8,Je),l("polygon",{id:"Rectangle-Copy-13",fill:`var(${e(n).cssVarBlockName("fill-color-2")})`,transform:"translate(39.500000, 3.500000) scale(-1, 1) translate(-39.500000, -3.500000) ",points:"24 7 41 7 55 -3.63806207e-12 38 -3.63806207e-12"},null,8,Ke)]),l("rect",{id:"Rectangle-Copy-15",fill:`url(#linearGradient-2-${e(t)})`,x:"13",y:"45",width:"40",height:"36"},null,8,Qe),l("g",Ze,[l("use",{id:"Mask",fill:`var(${e(n).cssVarBlockName("fill-color-8")})`,transform:"translate(8.500000, 18.000000) scale(-1, 1) translate(-8.500000, -18.000000) ","xlink:href":`#path-3-${e(t)}`},null,8,Xe),l("polygon",{id:"Rectangle-Copy",fill:`var(${e(n).cssVarBlockName("fill-color-9")})`,mask:`url(#mask-4-${e(t)})`,transform:"translate(12.000000, 9.000000) scale(-1, 1) translate(-12.000000, -9.000000) ",points:"7 0 24 0 20 18 7 16.5"},null,8,Ye)]),l("polygon",{id:"Rectangle-Copy-18",fill:`var(${e(n).cssVarBlockName("fill-color-2")})`,transform:"translate(66.000000, 51.500000) scale(-1, 1) translate(-66.000000, -51.500000) ",points:"62 45 79 45 70 58 53 58"},null,8,et)])])])]))}});var lt=q(st,[["__file","/home/runner/work/element-plus/element-plus/packages/components/empty/src/img-empty.vue"]]);const ot=H({image:{type:String,default:""},imageSize:Number,description:{type:String,default:""}}),at=["src"],nt={key:1},rt=B({name:"ElEmpty"}),it=B({...rt,props:ot,setup(y){const n=y,{t}=ie(),r=F("empty"),h=$(()=>n.description||t("el.table.emptyText")),i=$(()=>({width:ce(n.imageSize)}));return(s,p)=>(c(),f("div",{class:m(e(r).b())},[l("div",{class:m(e(r).e("image")),style:W(e(i))},[s.image?(c(),f("img",{key:0,src:s.image,ondragstart:"return false"},null,8,at)):O(s.$slots,"image",{key:1},()=>[a(lt)])],6),l("div",{class:m(e(r).e("description"))},[s.$slots.description?O(s.$slots,"description",{key:0}):(c(),f("p",nt,V(e(h)),1))],2),s.$slots.default?(c(),f("div",{key:0,class:m(e(r).e("bottom"))},[O(s.$slots,"default")],2)):b("v-if",!0)],2))}});var ct=q(it,[["__file","/home/runner/work/element-plus/element-plus/packages/components/empty/src/empty.vue"]]);const pt=Q(ct),ut=H({space:{type:[Number,String],default:""},active:{type:Number,default:0},direction:{type:String,default:"horizontal",values:["horizontal","vertical"]},alignCenter:{type:Boolean},simple:{type:Boolean},finishStatus:{type:String,values:["wait","process","finish","error","success"],default:"finish"},processStatus:{type:String,values:["wait","process","finish","error","success"],default:"process"}}),dt={[ee]:(y,n)=>[y,n].every(Z)},mt=B({name:"ElSteps"}),ft=B({...mt,props:ut,emits:dt,setup(y,{emit:n}){const t=y,r=F("steps"),{children:h,addChild:i,removeChild:s}=Ie(X(),"ElStep");return A(h,()=>{h.value.forEach((p,v)=>{p.setIndex(v)})}),pe("ElSteps",{props:t,steps:h,addStep:i,removeStep:s}),A(()=>t.active,(p,v)=>{n(ee,p,v)}),(p,v)=>(c(),f("div",{class:m([e(r).b(),e(r).m(p.simple?"simple":p.direction)])},[O(p.$slots,"default")],2))}});var vt=q(ft,[["__file","/home/runner/work/element-plus/element-plus/packages/components/steps/src/steps.vue"]]);const _t=H({title:{type:String,default:""},icon:{type:ue},description:{type:String,default:""},status:{type:String,values:["","wait","process","finish","error","success"],default:""}}),yt=B({name:"ElStep"}),ht=B({...yt,props:_t,setup(y){const n=y,t=F("step"),r=N(-1),h=N({}),i=N(""),s=de("ElSteps"),p=X();me(()=>{A([()=>s.props.active,()=>s.props.processStatus,()=>s.props.finishStatus],([o])=>{P(o)},{immediate:!0})}),fe(()=>{s.removeStep(E.uid)});const v=$(()=>n.status||i.value),k=$(()=>{const o=s.steps.value[r.value-1];return o?o.currentStatus:"wait"}),C=$(()=>s.props.alignCenter),z=$(()=>s.props.direction==="vertical"),w=$(()=>s.props.simple),D=$(()=>s.steps.value.length),U=$(()=>{var o;return((o=s.steps.value[D.value-1])==null?void 0:o.uid)===(p==null?void 0:p.uid)}),T=$(()=>w.value?"":s.props.space),g=$(()=>[t.b(),t.is(w.value?"simple":s.props.direction),t.is("flex",U.value&&!T.value&&!C.value),t.is("center",C.value&&!z.value&&!w.value)]),u=$(()=>{const o={flexBasis:Z(T.value)?`${T.value}px`:T.value?T.value:`${100/(D.value-(C.value?0:1))}%`};return z.value||U.value&&(o.maxWidth=`${100/D.value}%`),o}),S=o=>{r.value=o},M=o=>{const x=o==="wait",I={transitionDelay:`${x?"-":""}${150*r.value}ms`},G=o===s.props.processStatus||x?0:100;I.borderWidth=G&&!w.value?"1px":0,I[s.props.direction==="vertical"?"height":"width"]=`${G}%`,h.value=I},P=o=>{o>r.value?i.value=s.props.finishStatus:o===r.value&&k.value!=="error"?i.value=s.props.processStatus:i.value="wait";const x=s.steps.value[r.value-1];x&&x.calcProgress(i.value)},E=Y({uid:p.uid,currentStatus:v,setIndex:S,calcProgress:M});return s.addStep(E),(o,x)=>(c(),f("div",{style:W(e(u)),class:m(e(g))},[b(" icon & line "),l("div",{class:m([e(t).e("head"),e(t).is(e(v))])},[e(w)?b("v-if",!0):(c(),f("div",{key:0,class:m(e(t).e("line"))},[l("i",{class:m(e(t).e("line-inner")),style:W(h.value)},null,6)],2)),l("div",{class:m([e(t).e("icon"),e(t).is(o.icon||o.$slots.icon?"icon":"text")])},[O(o.$slots,"icon",{},()=>[o.icon?(c(),j(e(L),{key:0,class:m(e(t).e("icon-inner"))},{default:d(()=>[(c(),j(ve(o.icon)))]),_:1},8,["class"])):e(v)==="success"?(c(),j(e(L),{key:1,class:m([e(t).e("icon-inner"),e(t).is("status")])},{default:d(()=>[a(e(_e))]),_:1},8,["class"])):e(v)==="error"?(c(),j(e(L),{key:2,class:m([e(t).e("icon-inner"),e(t).is("status")])},{default:d(()=>[a(e(ye))]),_:1},8,["class"])):e(w)?b("v-if",!0):(c(),f("div",{key:3,class:m(e(t).e("icon-inner"))},V(r.value+1),3))])],2)],2),b(" title & description "),l("div",{class:m(e(t).e("main"))},[l("div",{class:m([e(t).e("title"),e(t).is(e(v))])},[O(o.$slots,"title",{},()=>[R(V(o.title),1)])],2),e(w)?(c(),f("div",{key:0,class:m(e(t).e("arrow"))},null,2)):(c(),f("div",{key:1,class:m([e(t).e("description"),e(t).is(e(v))])},[O(o.$slots,"description",{},()=>[R(V(o.description),1)])],2))],2)],6))}});var te=q(ht,[["__file","/home/runner/work/element-plus/element-plus/packages/components/steps/src/item.vue"]]);const gt=Q(vt,{Step:te}),kt=he(te),$t={key:0},Ct={key:1,style:{display:"flex","justify-content":"center"}},St={style:{width:"100%","max-width":"768px"}},bt={style:{"text-align":"center"}},wt={key:2},Et={key:0},Nt={key:1},qt=B({__name:"order",setup(y){const n=ge(),{cart:t}=ke(n),{removeToCart:r,addToCart:h,clearCart:i}=n,s=N(0),p=N(0),v=N(),k=N({tableNumber:null,name:null,telephone:null,remark:""}),C=N({orderId:null,tableNumber:null,name:null,telephone:null,totalPrice:null}),z=N(!1),w=g=>{h({id:g.id,name:g.name,price:g.price,count:1})},D=g=>{r({id:g.id,name:g.name,price:g.price,count:1})},U=g=>{g&&g.validate(u=>{u&&(z.value=!0,fetch("/api/createOrder",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({cart:t.value,orderData:k.value})}).then(S=>S.json()).then(S=>{S.code===200?(p.value=1,C.value=S.data,i()):p.value=2}).catch(()=>{p.value=2}).finally(()=>{s.value=3,z.value=!1}))})},T=Y({tableNumber:[{required:!0,message:"請輸入桌號",trigger:"blur"}],name:[{required:!0,message:"請輸入姓名",trigger:"blur"}],telephone:[{required:!0,message:"請輸入電話號碼",trigger:"blur"},{pattern:/^09\d{8}$/,message:"請輸入正確的電話號碼",trigger:"blur"}]});return(g,u)=>{const S=kt,M=gt,P=Ne,E=Be,o=pt,x=Ve,I=Ee,G=be,se=we,J=Se;return c(),f("div",null,[a(M,{active:e(s),"finish-status":"success",simple:""},{default:d(()=>[a(S,{title:"確認訂單內容"}),a(S,{title:"填寫桌號及聯絡信息"}),a(S,{title:"訂單狀態"})]),_:1},8,["active"]),e(s)===0?(c(),f("div",$t,[a(x,{data:e(t),"show-summary":"","sum-text":"合計",style:{width:"100%"}},{empty:d(()=>[a(o,{description:"點餐單是空的!"})]),default:d(()=>[a(P,{prop:"name",label:"產品名稱"}),a(P,{prop:"price",label:"單價"}),a(P,{prop:"count",label:"數量"}),a(P,{prop:"totalPrice",label:"總價格"}),a(P,{label:"數量",width:"150"},{default:d(_=>[a(E,{type:"danger",onClick:le=>D(_.row)},{default:d(()=>[R("-")]),_:2},1032,["onClick"]),a(E,{type:"success",onClick:le=>w(_.row)},{default:d(()=>[R("+")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])])):b("",!0),e(s)===1?(c(),f("div",Ct,[l("div",St,[a(se,{model:e(k),ref_key:"orderFormRef",ref:v,rules:e(T)},{default:d(()=>[a(G,{label:"桌號",prop:"tableNumber"},{default:d(()=>[a(I,{modelValue:e(k).tableNumber,"onUpdate:modelValue":u[0]||(u[0]=_=>e(k).tableNumber=_),autocomplete:"off"},null,8,["modelValue"])]),_:1}),a(G,{label:"訂餐姓名",prop:"name"},{default:d(()=>[a(I,{modelValue:e(k).name,"onUpdate:modelValue":u[1]||(u[1]=_=>e(k).name=_),autocomplete:"off"},null,8,["modelValue"])]),_:1}),a(G,{label:"電話號碼",prop:"telephone"},{default:d(()=>[a(I,{modelValue:e(k).telephone,"onUpdate:modelValue":u[2]||(u[2]=_=>e(k).telephone=_),autocomplete:"off"},null,8,["modelValue"])]),_:1}),a(G,{label:"備註",prop:"remark"},{default:d(()=>[a(I,{modelValue:e(k).remark,"onUpdate:modelValue":u[3]||(u[3]=_=>e(k).remark=_),autocomplete:"off",type:"textarea"},null,8,["modelValue"])]),_:1}),l("div",bt,[a(E,{type:"primary",onClick:u[4]||(u[4]=_=>U(e(v))),loading:e(z)},{default:d(()=>[R("送出訂單")]),_:1},8,["loading"])])]),_:1},8,["model","rules"])])])):b("",!0),e(s)===3?(c(),f("div",wt,[e(p)===1?(c(),f("div",Et,[a(J,{icon:"success",title:"訂單成功送出!","sub-title":"請耐心等候!"},{extra:d(()=>[a(E,{type:"primary",onClick:u[5]||(u[5]=_=>e(K).push({name:"home"}))},{default:d(()=>[R("回首頁")]),_:1})]),_:1}),l("p",null,"訂單編號: "+V(e(C).orderId),1),l("p",null,"桌號: "+V(e(C).tableNumber),1),l("p",null,"訂餐姓名: "+V(e(C).name),1),l("p",null,"訂餐電話: "+V(e(C).telephone),1),l("p",null,"總金額: "+V(e(C).totalPrice),1)])):b("",!0),e(p)===2?(c(),f("div",Nt,[a(J,{icon:"error",title:"訂單送出失敗!","sub-title":"請重新送出!"},{extra:d(()=>[a(E,{type:"primary",onClick:u[6]||(u[6]=_=>e(K).push("/"))},{default:d(()=>[R("回首頁")]),_:1})]),_:1})])):b("",!0)])):b("",!0),$e(a(E,{type:"primary",onClick:u[7]||(u[7]=_=>s.value++)},{default:d(()=>[R("下一步")]),_:1},512),[[Ce,e(s)==0&&e(t).length>0]])])}}});export{qt as default};
