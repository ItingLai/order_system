import{d as N,H as C,J as V,o as h,a as B,x as o,m as t,w as a,f as x,bd as O,p as l,A as c,e as b,g as y,aB as _,aS as $,aT as j,k as z}from"./index-Py-scUnY.js";import"./el-tag-W3Up5px_.js";import{E as P,a as A}from"./el-table-column-8BfuS7ep.js";import"./el-scrollbar-fUPsGVw2.js";import{E as D}from"./el-button-XlAlre1l.js";import"./el-input-_WaFOvKQ.js";import{E as J,a as L}from"./el-select-BTi2p5VM.js";import{o as E,c as I}from"./loading-3V3Myc38.js";import{E as M}from"./index-HUOZQA-l.js";import"./_Uint8Array-NC-A-qIZ.js";import"./_initCloneObject-wcG7vwCV.js";import"./debounce-B7PqWfie.js";import"./use-form-item-REpgKkM3.js";import"./scroll-AUypToXu.js";const s=p=>($("data-v-de0223ab"),p=p(),j(),p),H=s(()=>o("h1",null,"訂單管理",-1)),R={style:{display:"flex","margin-bottom":"10px"}},U=s(()=>o("label",{style:{"margin-right":"10px"}},"篩選訂單狀態",-1)),q=s(()=>o("div",{style:{"flex-grow":"1"}},null,-1)),F={style:{margin:"1rem 0 0 2rem"}},G={class:"orderInfo"},K=s(()=>o("span",{class:"title"},"訂餐時間:",-1)),Q={class:"orderInfo"},W=s(()=>o("span",{class:"title"},"姓名:",-1)),X={class:"orderInfo"},Y=s(()=>o("span",{class:"title"},"電話:",-1)),Z={class:"orderInfo"},ee=s(()=>o("span",{class:"title"},"桌號:",-1)),te={class:"orderInfo"},oe=s(()=>o("span",{class:"title"},"備註:",-1)),ae={class:"orderInfo",style:{"font-size":"18px","font-weight":"bold",color:"crimson"}},le=s(()=>o("span",{class:"title"},"總計:",-1)),se=s(()=>o("h3",null,"品項",-1)),ne=N({__name:"order",setup(p){const g=C([]),m=C("all"),w=(i,d)=>{E(),fetch("/api/manage/manageOrder",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({option:d,orderId:i.orderId})}).then(n=>n.json()).then(n=>{n.code===200?_.success("操作成功!"):_.error("操作失敗!")}).catch(()=>{_.error("操作失敗!")}).finally(()=>{I(),u()})},u=()=>{E(),fetch(`/api/manage/getAllOrder?category=${m.value}`,{headers:{"Content-Type":"application/json"}}).then(i=>i.json()).then(i=>{i.code===200?g.value=i.data:_.error("訂單加載失敗!")}).catch(()=>{_.error("訂單加載失敗!")}).finally(()=>{I()})};return V(()=>{u()}),(i,d)=>{const n=J,S=L,f=D,r=P,v=A,T=M;return h(),B("div",null,[H,o("div",R,[U,t(S,{modelValue:x(m),"onUpdate:modelValue":d[0]||(d[0]=e=>O(m)?m.value=e:null),placeholder:"請選擇訂單狀態",onChange:d[1]||(d[1]=e=>u())},{default:a(()=>[t(n,{label:"全部",value:"all"}),t(n,{label:"等待接單",value:"wait"}),t(n,{label:"已接單",value:"accept"}),t(n,{label:"已完成",value:"end"}),t(n,{label:"已取消",value:"cancel"})]),_:1},8,["modelValue"]),q,t(f,{type:"primary",onClick:d[2]||(d[2]=e=>u())},{default:a(()=>[l("重新獲取訂單")]),_:1})]),t(v,{data:x(g),style:{width:"100%"}},{default:a(()=>[t(r,{type:"expand"},{default:a(e=>[o("div",F,[o("p",G,[K,l(" "+c(e.row.date),1)]),o("p",Q,[W,l(" "+c(e.row.name),1)]),o("p",X,[Y,l(" "+c(e.row.telephone),1)]),o("p",Z,[ee,l(" "+c(e.row.tableNumber),1)]),o("p",te,[oe,l(" "+c(e.row.remark),1)]),o("p",ae,[le,l(" "+c(e.row.totalPrice),1)]),se,t(v,{data:e.row.item},{default:a(()=>[t(r,{label:"名稱",prop:"name"}),t(r,{label:"數量",prop:"count"})]),_:2},1032,["data"])])]),_:1}),t(r,{prop:"date",label:"訂餐時間"}),t(r,{prop:"name",label:"姓名"}),t(r,{prop:"tableNumber",label:"桌號",width:"100"}),t(r,{prop:"totalPrice",label:"總價",width:"100"}),t(r,{prop:"status",label:"狀態",width:"100"},{default:a(e=>[t(T,{effect:"dark",type:e.row.status===0?"info":e.row.status===1?"warning":e.row.status===2?"success":"danger"},{default:a(()=>[l(c(e.row.status===0?"等待接單":e.row.status===1?"已接單":e.row.status===2?"已完成":"已取消"),1)]),_:2},1032,["type"])]),_:1}),t(r,{fixed:"right",label:"操作",width:"150"},{default:a(e=>[e.row.status!==2&&e.row.status!==3?(h(),b(f,{key:0,type:"danger",size:"small",onClick:k=>w(e.row,"cancel")},{default:a(()=>[l("取消 ")]),_:2},1032,["onClick"])):y("",!0),e.row.status===0?(h(),b(f,{key:1,type:"primary",size:"small",onClick:k=>w(e.row,"accept")},{default:a(()=>[l("接單")]),_:2},1032,["onClick"])):y("",!0),e.row.status===1?(h(),b(f,{key:2,type:"success",size:"small",onClick:k=>w(e.row,"end")},{default:a(()=>[l("完成")]),_:2},1032,["onClick"])):y("",!0)]),_:1})]),_:1},8,["data"])])}}}),ve=z(ne,[["__scopeId","data-v-de0223ab"]]);export{ve as default};
